import{r,u as rt,f as at,s as f,x as Se,j as e,L as it,F as Qe,X as It,a as _t,I as Lt,b as A,J as Ft,K as Ct,g as Mt,h as At,i as Ut,k as Dt,N as Pt,D as Ze,m as Et,n as et,C as tt,o as Rt,R as Re,E as Ot,S as $t,M as zt,O as Bt,q as Tt,t as qt,v as Wt,w as Ht}from"./index-CRY20gw9.js";import{u as Jt,M as lt,e as Kt,U as Xt,o as Yt,c as Gt,f as Qt,a as J,b as Zt,T as st,d as es,F as ts,C as ss,P as rs}from"./CommentSection-DzCzTiYL.js";import{C as as,D as is}from"./DataTable-DQWsU1Ng.js";import{y as ls,F as ns,E as os}from"./validationUtils-WU0SlS9E.js";import{E as ds}from"./ErrorState-Bk4iuA34.js";import{M as cs}from"./Modal-Dq8btZl1.js";import{P as ms}from"./plus-circle-B969A4oC.js";const oe="CREATE_NEW_VERSION_SENTINEL_VALUE",us=Gt().shape({selectedSoftwareId:J().required("Software Product must be selected."),title:J().trim().min(1,"Link Title cannot be empty and must contain non-space characters.").max(255,"Title cannot exceed 255 characters."),selectedVersionId:J().required("Version must be selected or a new one entered."),typedVersionString:J().when("selectedVersionId",{is:oe,then:a=>a.required('New Version String is required when "Enter New Version" is selected.').min(1,"New Version String cannot be empty."),otherwise:a=>a.transform(y=>y===""?void 0:y).optional().nullable()}),inputMode:J().oneOf(["url","upload"]).required("Input mode must be selected."),externalUrl:J().when("inputMode",(a,y)=>(Array.isArray(a)?a[0]:a)==="url"?ls().required("External URL is required for URL mode."):J().optional().nullable()),selectedFile:Zt().when(["inputMode","$isEditMode","$isOriginallyFileBased"],{is:(a,y,x)=>!!(a==="upload"&&!y||a==="upload"&&y&&!x),then:a=>a.required("A file is required for this operation.").test("filePresent","A file is required.",y=>!!y),otherwise:a=>a.nullable()}),description:J().optional().max(1e3,"Description cannot exceed 1000 characters."),compatibleVmsVersionIds:Qt().of(J().required()).optional()}),fs=({linkToEdit:a,onLinkAdded:y,onLinkUpdated:x,onCancelEdit:de})=>{const c=!!a,{register:p,handleSubmit:ye,control:G,formState:{errors:m},watch:K,setValue:b,reset:k}=Jt({resolver:Yt(us),context:{isEditMode:c,isOriginallyFileBased:!!(c&&a&&!a.is_external_link)},defaultValues:{selectedSoftwareId:"",title:"",selectedVersionId:"",typedVersionString:"",inputMode:"url",externalUrl:"",selectedFile:null,description:"",compatibleVmsVersionIds:[]}}),[V,$]=r.useState([]),[z,_]=r.useState([]),[ke,U]=r.useState([]),[Q,D]=r.useState(!1),[Z,X]=r.useState(null),[w,B]=r.useState(!1),[ee,T]=r.useState(!1),[L,ce]=r.useState(!1),[ve,je]=r.useState(0),[te,se]=r.useState(!1),{isAuthenticated:me,user:P}=rt(),re=P==null?void 0:P.role,I=r.useRef(null),j=K("selectedSoftwareId"),ue=K("selectedVersionId"),ae=K("inputMode"),F=K("selectedFile"),fe=ue===oe;r.useEffect(()=>{const s=d=>{te&&(d.preventDefault(),d.returnValue="")};return window.addEventListener("beforeunload",s),()=>{window.removeEventListener("beforeunload",s)}},[te]),r.useEffect(()=>{const s=()=>{document.visibilityState==="hidden"&&te&&_t("Changing tabs or minimizing the window might interrupt the upload process.")};return document.addEventListener("visibilitychange",s),()=>{document.removeEventListener("visibilitychange",s)}},[te]),r.useEffect(()=>{me&&(re==="admin"||re==="super_admin")&&(T(!0),at().then($).catch(()=>f("Failed to load software list.")).finally(()=>T(!1)))},[me,re]),r.useEffect(()=>{if(j&&V.length>0){T(!0),_([]),b("selectedVersionId",""),b("typedVersionString","");const s=V.find(d=>d.id.toString()===j);if(s&&s.name==="VA"){D(!0);const d=V.find(h=>h.name==="VMS");d?(ce(!0),Se(d.id).then(U).catch(()=>f("Failed to load VMS versions for compatibility.")).finally(()=>ce(!1))):U([])}else D(!1),U([]);Se(parseInt(j)).then(_).catch(()=>f("Failed to load versions for selected software.")).finally(()=>T(!1))}else _([]),D(!1),U([]),b("selectedVersionId",""),b("typedVersionString","")},[j,b,V]),r.useEffect(()=>{if(c&&a&&V.length>0){const s=V.find(v=>v.id===a.software_id),d=!!s&&(s.name==="VMS"||s.name==="VA");D(d);const h={selectedSoftwareId:j&&j!==a.software_id.toString()?j:a.software_id.toString(),title:a.title,description:a.description||"",inputMode:a.is_external_link?"url":"upload",externalUrl:a.is_external_link?a.url:"",compatibleVmsVersionIds:d&&a.compatible_vms_versions?typeof a.compatible_vms_versions=="string"?a.compatible_vms_versions.split(",").map(v=>v.trim()).filter(v=>v):Array.isArray(a.compatible_vms_versions)?a.compatible_vms_versions.map(String):[]:[]};j===a.software_id.toString()&&(a.version_id&&z.length>0?z.find(E=>E.id===a.version_id)?h.selectedVersionId=a.version_id.toString():(h.selectedVersionId=oe,h.typedVersionString=a.version_name):a.version_name&&(h.selectedVersionId=oe,h.typedVersionString=a.version_name)),k(h),a.is_external_link?X(null):X(a.original_filename_ref||a.url.split("/").pop()||"unknown_file"),b("selectedFile",null),I.current&&(I.current.value="")}else c||q(!!j)},[c,a,k,b,z,j,V]);const q=(s=!1)=>{const d=s?K("selectedSoftwareId"):"";k({selectedSoftwareId:d,title:"",selectedVersionId:"",typedVersionString:"",inputMode:"url",externalUrl:"",selectedFile:null,description:"",compatibleVmsVersionIds:[]}),X(null),I.current&&(I.current.value="")},ge=s=>{s.target.files&&s.target.files[0]?b("selectedFile",s.target.files[0],{shouldValidate:!0,shouldDirty:!0}):b("selectedFile",null,{shouldValidate:!0,shouldDirty:!0})},ie=()=>{b("selectedFile",null,{shouldValidate:!0,shouldDirty:!0}),I.current&&(I.current.value="")},xe=async s=>{var E,C,R,le,Ve;B(!0),s.inputMode==="upload"&&s.selectedFile&&se(!0),je(0);let d,h;s.selectedVersionId===oe&&s.typedVersionString?h=s.typedVersionString.trim():s.selectedVersionId&&s.selectedVersionId!==oe&&(d=parseInt(s.selectedVersionId));const v={software_id:parseInt(s.selectedSoftwareId),title:s.title.trim(),description:((E=s.description)==null?void 0:E.trim())||void 0};d&&(v.version_id=d),h&&(v.typed_version_string=h),Q&&s.compatibleVmsVersionIds&&s.compatibleVmsVersionIds.length>0&&(v.compatible_vms_version_ids=s.compatibleVmsVersionIds);try{let o;if(s.inputMode==="url"){const S={...v,url:s.externalUrl.trim(),is_external_link:!0};c&&a?(o=await Lt(a.id,S),A(`Link "${o.title}" updated successfully!`),x&&x(o)):(o=await Ft(S),A(`Link "${o.title}" added successfully!`),y&&y(o),c||(q(!0),b("selectedVersionId",""),b("typedVersionString","")))}else{const S={software_id:parseInt(s.selectedSoftwareId),title:s.title.trim(),description:((C=s.description)==null?void 0:C.trim())||void 0,version_id:d,typed_version_string:h,compatible_vms_version_ids:Q&&s.compatibleVmsVersionIds&&s.compatibleVmsVersionIds.length>0?s.compatibleVmsVersionIds:void 0};if(c&&a)if(!a.is_external_link||a.is_external_link&&s.selectedFile)o=await Ct(a.id,S,s.selectedFile||null),A(`Link "${o.title}" updated successfully!`),x&&x(o);else{f("If switching from a URL to an uploaded file, please select a file."),B(!1),se(!1);return}else if(s.selectedFile){const W={software_id:s.selectedSoftwareId,...d&&{version_id:d.toString()},...h&&{typed_version_string:h},title:s.title.trim(),link_title:s.title.trim(),description:((R=s.description)==null?void 0:R.trim())||"",...Q&&s.compatibleVmsVersionIds&&s.compatibleVmsVersionIds.length>0&&{compatible_vms_version_ids_json:JSON.stringify(s.compatibleVmsVersionIds)}};o=await Mt(s.selectedFile,"link_file",W,Ie=>je(Ie)),A(`Link file "${o.title}" added successfully via chunked upload!`),y&&y(o),q(!0),b("selectedVersionId",""),b("typedVersionString","")}else{f("No file selected for upload. Please select a file."),B(!1),se(!1);return}}}catch(o){const S=((Ve=(le=o.response)==null?void 0:le.data)==null?void 0:Ve.msg)||o.message;let W=`Failed to ${c?"update":"add"} link.`;S&&typeof S=="string"&&S.includes("UNIQUE constraint failed")?c?W="A link with this title already exists for this software/version. Please use a different title or check for duplicates.":W="A link with this title already exists for this software/version. Please use a different title.":S&&(W=S),f(W),s.inputMode==="upload"&&se(!1)}finally{B(!1),s.inputMode==="upload"&&se(!1)}},Ne=s=>{console.error("Form validation errors:",s),f("Please correct the errors highlighted in the form.")};return!me||!re||!["admin","super_admin"].includes(re)?null:e.jsxs("form",{onSubmit:ye(xe,Ne),className:"space-y-6 bg-white dark:bg-gray-800 dark:border-gray-700 p-6 rounded-lg shadow-md border border-gray-200",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100",children:[" ",c?"Edit Link":"Add New Link"," "]}),c&&de&&e.jsxs("button",{type:"button",onClick:de,disabled:w,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:[e.jsx(lt,{size:18,className:"mr-2"}),"Cancel Edit"]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"selectedSoftwareId",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Software Product*"}),ee&&!V.length?e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Loading software..."}):e.jsxs("select",{id:"selectedSoftwareId",...p("selectedSoftwareId"),disabled:w||ee&&!V.length,className:`mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md ${m.selectedSoftwareId?"border-red-500":""} dark:bg-gray-700 dark:text-gray-100 dark:border-gray-600`,children:[e.jsx("option",{value:"",disabled:!0,children:"Select Software Product"}),V.map(s=>e.jsx("option",{value:s.id.toString(),children:s.name},s.id))]}),m.selectedSoftwareId&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:m.selectedSoftwareId.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"selectedVersionId",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Version*"}),e.jsx("div",{className:"mt-1",children:e.jsxs("select",{id:"selectedVersionId",...p("selectedVersionId"),disabled:w||ee||!j,className:`block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md ${m.selectedVersionId?"border-red-500":""} dark:bg-gray-700 dark:text-gray-100 dark:border-gray-600`,children:[e.jsx("option",{value:"",disabled:z.length>0&&!!j,children:ee&&j?"Loading versions...":"Select Existing Version"}),z.map(s=>e.jsx("option",{value:s.id.toString(),children:s.version_number},s.id)),e.jsx("option",{value:oe,children:"Enter New Version String..."})]})}),fe&&e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{htmlFor:"typedVersionString",className:"block text-xs font-medium text-gray-600 dark:text-gray-400",children:"New Version String*:"}),e.jsx("input",{type:"text",id:"typedVersionString",...p("typedVersionString"),placeholder:"e.g., 1.2.4-final",className:`mt-1 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md p-2 focus:ring-blue-500 focus:border-blue-500 ${m.typedVersionString?"border-red-500":""} dark:bg-gray-700 dark:text-gray-100 dark:border-gray-600 dark:placeholder-gray-400`}),e.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"This version will be created for the selected software if it doesn't exist."})]}),m.selectedVersionId&&!fe&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.selectedVersionId.message}),m.typedVersionString&&fe&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.typedVersionString.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Link Title*"}),e.jsx("input",{type:"text",id:"title",...p("title"),disabled:w,className:`mt-1 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md p-2 focus:ring-blue-500 focus:border-blue-500 ${m.title?"border-red-500":""} dark:bg-gray-700 dark:text-gray-100 dark:border-gray-600 dark:placeholder-gray-400`}),m.title&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.title.message})]}),Q&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"compatibleVmsVersionIds",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Compatible VMS Versions (for VMS/VA Links)"}),L?e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Loading VMS versions..."}):e.jsx(Kt,{name:"compatibleVmsVersionIds",control:G,defaultValue:[],render:({field:s})=>e.jsx("div",{className:"mt-1 block w-full max-h-40 overflow-y-auto p-2 border border-gray-300 rounded-md bg-white dark:bg-gray-700 dark:border-gray-600",children:ke.length===0?e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No VMS versions available."}):ke.map(d=>{var h;return e.jsxs("label",{className:"flex items-center space-x-2 p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:[e.jsx("input",{type:"checkbox",className:"form-checkbox h-5 w-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-900 dark:checked:bg-blue-500",value:d.id.toString(),checked:((h=s.value)==null?void 0:h.includes(d.id.toString()))||!1,onChange:v=>{const E=v.target.value,C=s.value||[],R=v.target.checked?[...C,E]:C.filter(le=>le!==E);s.onChange(R)},disabled:w||L}),e.jsx("span",{className:"text-sm font-medium text-gray-800 dark:text-gray-200",children:d.version_number})]},d.id)})})}),m.compatibleVmsVersionIds&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.compatibleVmsVersionIds.message}),e.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Select VMS versions this link is compatible with. Only applicable if the link is for 'VMS' or 'VA' software."})]}),e.jsxs("div",{className:"my-4",children:[e.jsx("span",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Link Source:"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"radio",...p("inputMode"),value:"url",className:"form-radio h-4 w-4 text-blue-600",disabled:w}),e.jsxs("span",{className:"flex items-center dark:text-gray-300",children:[e.jsx(it,{size:16,className:"mr-1 text-gray-600 dark:text-gray-400"}),"Provide External URL"]})]}),e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"radio",...p("inputMode"),value:"upload",className:"form-radio h-4 w-4 text-blue-600",disabled:w}),e.jsxs("span",{className:"flex items-center dark:text-gray-300",children:[e.jsx(Xt,{size:16,className:"mr-1 text-gray-600 dark:text-gray-400"}),"Upload File for this Link"]})]})]}),m.inputMode&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.inputMode.message})]}),ae==="url"&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"externalUrl",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Link URL*"}),e.jsx("input",{type:"text",id:"externalUrl",...p("externalUrl"),placeholder:"https://example.com/resource",disabled:w,className:`mt-1 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md p-2 focus:ring-blue-500 focus:border-blue-500 ${m.externalUrl?"border-red-500":""} dark:bg-gray-700 dark:text-gray-100 dark:border-gray-600 dark:placeholder-gray-400`}),m.externalUrl&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.externalUrl.message})]}),ae==="upload"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:c&&Z&&!F?"Replace File (Optional)":"Select File to Upload*"}),e.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md hover:border-blue-500 dark:border-gray-600 dark:hover:border-blue-400 transition-colors",children:e.jsxs("div",{className:"space-y-1 text-center",children:[e.jsx(Qe,{className:"mx-auto h-12 w-12 text-gray-400 dark:text-gray-500"}),e.jsxs("div",{className:"flex text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("label",{htmlFor:"link-file-upload-input",className:"relative cursor-pointer bg-white dark:bg-gray-800 rounded-md font-medium text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-blue-500",children:[e.jsx("span",{children:F?"Change file":"Upload a file"}),e.jsx("input",{id:"link-file-upload-input",name:"file-input-element",type:"file",className:"sr-only",onChange:ge,ref:I,disabled:w})]}),e.jsx("p",{className:"pl-1",children:"or drag and drop"})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Any file type relevant for links."})]})}),(F||c&&Z)&&e.jsxs("div",{className:"mt-3 flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md",children:[e.jsxs("div",{className:"flex items-center space-x-2 overflow-hidden",children:[e.jsx(Qe,{size:18,className:"text-gray-500 dark:text-gray-400 flex-shrink-0"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300 truncate",children:F?F.name:Z}),c&&Z&&!F&&e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 ml-2",children:"(current)"})]}),F&&e.jsx("button",{type:"button",onClick:ie,disabled:w,className:"p-1 rounded-full text-gray-400 hover:text-gray-600 hover:bg-gray-200 dark:text-gray-500 dark:hover:text-gray-300 dark:hover:bg-gray-600",children:e.jsx(It,{size:16})})]}),m.selectedFile&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.selectedFile.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Description"}),e.jsx("textarea",{id:"description",rows:3,...p("description"),disabled:w,className:`mt-1 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md p-2 focus:ring-blue-500 focus:border-blue-500 ${m.description?"border-red-500":""} dark:bg-gray-700 dark:text-gray-100 dark:border-gray-600 dark:placeholder-gray-400`}),m.description&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.description.message})]}),e.jsx("div",{className:"flex space-x-3",children:e.jsx("button",{type:"submit",disabled:w||ee,className:"flex-1 inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:w?c?"Updating...":"Adding...":c?"Update Link":"Add Link"})}),w&&ae==="upload"&&ve>0&&e.jsxs("div",{className:"w-full bg-gray-200 rounded-full h-4 dark:bg-gray-700 my-3 relative",children:[e.jsx("div",{className:"bg-blue-600 h-4 rounded-full transition-all duration-150 ease-out",style:{width:`${ve}%`}}),e.jsxs("p",{className:"absolute inset-0 text-center text-xs font-medium leading-4 text-white dark:text-gray-100",children:[Math.round(ve),"%"]})]})]})},vs=()=>{const{searchTerm:a,setSearchTerm:y}=At(),{isAuthenticated:x,user:de}=rt(),c=de==null?void 0:de.role,[p,ye]=r.useState([]),[G,m]=r.useState([]),[K,b]=r.useState([]),[k,V]=r.useState(null),[$,z]=r.useState(null),[_,ke]=r.useState(""),[U,Q]=r.useState(""),[D,Z]=r.useState(""),[X,w]=r.useState(""),[B,ee]=r.useState(""),[T,L]=r.useState(1),[ce,ve]=r.useState(15),[je,te]=r.useState(0),[se,me]=r.useState(0),[P,re]=r.useState("title"),[I,j]=r.useState("asc"),[ue,ae]=r.useState(!0),[F,fe]=r.useState(null),[q,ge]=r.useState(!1),[ie,xe]=r.useState(null),[Ne,s]=r.useState(!1),[d,h]=r.useState(null),[v,E]=r.useState(!1),[C,R]=r.useState(new Map),[le,Ve]=r.useState(!1),[o,S]=r.useState(new Set),[W,Ie]=r.useState(!1),[nt,Oe]=r.useState(!1),[he,$e]=r.useState(!1),[ze,_e]=r.useState(!1),[H,Ae]=r.useState(null),[Be,Te]=r.useState([]),[Le,Fe]=r.useState(void 0),[qe,Ue]=r.useState(!1),[De,We]=r.useState(!1),[N,we]=r.useState(null),Ce=r.useRef(null),He=Ut(),[Me,ot]=Dt(),[dt,O]=r.useState(null),Pe=r.useMemo(()=>k!==null||$!==null||_!==""||U!==""||D!==""||a!=="",[k,$,_,U,D,a]),Je=r.useCallback(()=>{O(null),V(null),z(null),ke(""),Q(""),Z(""),y&&y(""),L(1)},[y,O]),M=r.useCallback(async(t,l=!1)=>{var i,u;l&&ae(!0),fe(null);try{const n=await Pt(k||void 0,$||void 0,t,ce,P,I,_||void 0,X||void 0,B||void 0,a);ye(n.links),te(n.total_pages),me(n.total_links),L(n.page),ve(n.per_page);const g=new Map;x&&n.links&&n.links.forEach(ne=>g.set(ne.id,{favoriteId:ne.favorite_id})),R(g)}catch(n){const g=((u=(i=n.response)==null?void 0:i.data)==null?void 0:u.msg)||n.message||"Failed to fetch links.";l?(fe(g),ye([]),te(0),me(0)):f(g)}finally{l&&ae(!1)}},[k,$,ce,P,I,_,X,B,x,a]);r.useEffect(()=>{const t=setTimeout(()=>w(U),500);return()=>clearTimeout(t)},[U]),r.useEffect(()=>{const t=setTimeout(()=>ee(D),500);return()=>clearTimeout(t)},[D]),r.useEffect(()=>{x?at().then(m).catch(t=>f("Failed to load software list.")):m([])},[x]),r.useEffect(()=>{O(null),x?M(1,!0):(ye([]),ae(!1))},[x,k,$,P,I,_,X,B,a,M,O]),r.useEffect(()=>{S(new Set)},[k,$,P,I,_,X,B,a,T]),r.useEffect(()=>{k?Se(k).then(b).catch(()=>{f("Failed to load versions for filter."),b([])}):b([])},[k]),r.useEffect(()=>{const t=Me.get("page"),l=Me.get("highlight");if(t){const i=parseInt(t,10);!isNaN(i)&&i>0&&i!==T&&(L(i),M(i,!0))}O(l||null)},[Me,T,L,M]),r.useEffect(()=>{const t=new URLSearchParams(He.search),l=t.get("item_id"),i=t.get("comment_id");if(l&&i&&p.length>0){const u=parseInt(l,10);if(!isNaN(u)){const n=p.find(g=>g.id===u);n?((!N||N.id!==n.id)&&we(n),setTimeout(()=>{var g;(g=Ce.current)==null||g.scrollIntoView({behavior:"smooth",block:"center"})},100)):console.warn(`LinksView: Link with item_id ${u} not found in the current list.`)}}},[He.search,p,N]),r.useEffect(()=>{H?(We(!0),Se(H).then(Te).catch(()=>f("Failed to load versions for move.")).finally(()=>We(!1))):Te([])},[H]);const ct=t=>{O(null),V(t),z(null),L(1)},mt=t=>{O(null),z(t.target.value?parseInt(t.target.value):null),L(1)},ut=t=>{O(null),L(t),M(t,!0);const l=new URLSearchParams(Me);l.set("page",t.toString()),l.delete("highlight"),ot(l)},ft=t=>{O(null),re(t),j(l=>P===t&&l==="asc"?"desc":"asc"),L(1)},Ke=async t=>{if(ge(!1),xe(null),await M(1,!0),k)try{const l=await Se(k);b(l)}catch(l){console.error("Error refreshing version list after operation:",l),f("Failed to refresh version list for the current software filter.")}},gt=()=>{xe(null),ge(!0)},xt=t=>{xe(t),ge(!0),window.scrollTo({top:0,behavior:"smooth"})},Xe=()=>{xe(null),ge(!1)},ht=t=>{h(t),s(!0)},Ee=()=>{h(null),s(!1)},pt=async()=>{if(d){E(!0),N&&N.id===d.id&&we(null);try{await Bt(d.id),A(`Link "${d.title}" deleted.`),Ee(),M(1,!0)}catch(t){f(t.message||"Delete failed."),Ee()}finally{E(!1)}}},bt=(t,l)=>S(i=>{const u=new Set(i);return l?u.add(t):u.delete(t),u}),yt=t=>{const l=new Set;t&&p.forEach(i=>l.add(i.id)),S(l)},kt=()=>{if(o.size===0){f("No items selected.");return}Ue(!0)},vt=async()=>{Ue(!1),Ie(!0),N&&o.has(N.id)&&we(null);try{const t=await Tt(Array.from(o),"link");A(t.msg||`${t.deleted_count} link(s) deleted.`),S(new Set),M(1,!0)}catch(t){f(t.message||"Bulk delete failed.")}finally{Ie(!1)}},Ye=r.useMemo(()=>p.filter(t=>o.has(t.id)&&!t.is_external_link&&t.stored_filename).length,[p,o]),wt=async()=>{if(o.size===0){f("No items selected.");return}const t=p.filter(i=>o.has(i.id)&&!i.is_external_link&&i.stored_filename);if(t.length===0){f("No downloadable files among selected links. External links or links without files cannot be bulk downloaded.");return}const l=t.map(i=>i.id);l.length<o.size&&A(`Starting download for ${l.length} file-based links. External links were excluded.`),Oe(!0);try{const i=await Rt(l,"link"),u=URL.createObjectURL(i),n=document.createElement("a");n.href=u;const g=new Date().toISOString().replace(/:/g,"-");n.download=`bulk_download_links_${g}.zip`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(u),l.length===o.size&&A("Download started.")}catch(i){f(i.message||"Bulk download failed.")}finally{Oe(!1)}},St=()=>{if(o.size===0){f("No items selected.");return}if(G.length===0){f("Software list unavailable.");return}Ae(null),Fe(void 0),_e(!0)},jt=async()=>{if(!H){f("Select target software.");return}_e(!1),$e(!0);const t={target_software_id:H};Le!==void 0&&(t.target_version_id=Le);try{const l=await qt(Array.from(o),"link",t);A(l.msg||`${l.moved_count} link(s) moved.`),S(new Set),M(1,!0)}catch(l){let i="Bulk move failed.";l.message&&typeof l.message=="string"&&l.message.includes("UNIQUE constraint failed")?i="A link with this title already exists for the target software/version. Please check for duplicates.":l.message&&(i=l.message),f(i)}finally{$e(!1),Ae(null),Fe(void 0)}},Nt=[{key:"title",header:"Title",sortable:!0},{key:"software_name",header:"Software",sortable:!0},{key:"version_name",header:"Version",sortable:!0,render:t=>t.version_name||"N/A"},{key:"compatible_vms_versions",header:"VMS Compatibility",sortable:!0,render:t=>{const l=t.software_name==="VMS"||t.software_name==="VA";let i="-";return l&&(t.compatible_vms_versions&&t.compatible_vms_versions.length>0?Array.isArray(t.compatible_vms_versions)?i=t.compatible_vms_versions.join(", "):typeof t.compatible_vms_versions=="string"?i=t.compatible_vms_versions:i="N/A":i="N/A"),e.jsx("div",{className:"text-center",children:i})}},{key:"description",header:"Description",render:(t,l)=>{const i=Re.useRef(null),[u,n]=Re.useState(!1),g=t.description||"-";return Re.useEffect(()=>{i.current&&n(i.current.scrollHeight>i.current.clientHeight)},[t.description]),e.jsxs("div",{className:"flex items-center justify-between w-72",children:[e.jsx("span",{ref:i,className:"block line-clamp-3 text-sm w-full",title:t.description||"",children:g}),u&&e.jsx("button",{onClick:ne=>{ne.stopPropagation(),l.showModal(t.description||"-")},className:"ml-2 p-1 text-blue-600 hover:text-blue-800 flex-shrink-0",title:"Read More",children:e.jsx(Ot,{size:16})})]})}},{key:"url",header:"Link",render:t=>{var n;const l=t.is_external_link||t.is_downloadable!==!1,i="Link",u=t.is_external_link?os:Ze;return!l&&!t.is_external_link?e.jsxs("span",{className:"flex items-center text-gray-400 cursor-not-allowed",title:"Download not permitted",children:[e.jsx(u,{size:14,className:"mr-1 flex-shrink-0"}),i]}):e.jsxs("a",{href:t.url,target:t.is_external_link||!((n=t.url)!=null&&n.startsWith("/"))?"_blank":"_self",rel:"noopener noreferrer",className:`flex items-center ${l?"text-blue-600 hover:text-blue-800":"text-gray-400 cursor-not-allowed"}`,onClick:g=>{l||g.preventDefault(),g.stopPropagation()},title:l?t.is_external_link?"Open external link":"Download file":"Download not permitted",children:[e.jsx(u,{size:14,className:"mr-1 flex-shrink-0"}),i]})}},{key:"uploaded_by_username",header:"Added By",sortable:!0,render:t=>t.uploaded_by_username||"N/A"},{key:"updated_by_username",header:"Updated By",sortable:!1,render:t=>t.updated_by_username||"N/A"},{key:"created_at",header:"Created",sortable:!0,render:t=>et(t.created_at??"")},{key:"updated_at",header:"Updated",sortable:!0,render:t=>et(t.updated_at??"")},{key:"actions",header:"Actions",render:t=>{var l,i,u;return e.jsxs("div",{className:"flex space-x-1 items-center",children:[x&&e.jsx("button",{onClick:n=>{n.stopPropagation(),Vt(t,"link")},className:`p-1 rounded-md ${(l=C.get(t.id))!=null&&l.favoriteId?"text-yellow-500 hover:text-yellow-600":"text-gray-400 hover:text-yellow-500"}`,title:(i=C.get(t.id))!=null&&i.favoriteId?"Remove Favorite":"Add Favorite",children:e.jsx($t,{size:16,className:(u=C.get(t.id))!=null&&u.favoriteId?"fill-current":""})}),x&&e.jsxs("button",{onClick:n=>{n.stopPropagation(),N&&N.id===t.id?we(null):(we(t),setTimeout(()=>{var g;return(g=Ce.current)==null?void 0:g.scrollIntoView({behavior:"smooth"})},0))},className:"p-1 text-gray-600 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-200 rounded-md",title:N&&N.id===t.id?"Hide Comments":"View Comments",children:[e.jsx(zt,{size:16}),e.jsxs("span",{className:"ml-1 text-xs",children:["(",t.comment_count??0,")"]})]}),(c==="admin"||c==="super_admin")&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:n=>{n.stopPropagation(),xt(t)},className:"p-1 text-blue-600 hover:text-blue-800 rounded-md",title:"Edit",children:e.jsx(rs,{size:16})}),e.jsx("button",{onClick:n=>{n.stopPropagation(),ht(t)},className:"p-1 text-red-600 hover:text-red-800 rounded-md",title:"Delete",children:e.jsx(st,{size:16})})]})]})}}],Ge=r.useCallback(()=>{M(1,!0)},[M]),Vt=async(t,l)=>{var g,ne;if(!x){f("Please log in to manage favorites.");return}const i=C.get(t.id),u=!!(i!=null&&i.favoriteId),n=new Map(C);u?n.set(t.id,{favoriteId:void 0}):n.set(t.id,{favoriteId:-1}),R(n);try{if(u&&typeof(i==null?void 0:i.favoriteId)=="number")await Wt(t.id,l),A(`"${t.title}" removed from favorites.`),R(Y=>{const pe=new Map(Y);return pe.set(t.id,{favoriteId:void 0}),pe});else{const Y=await Ht(t.id,l);R(pe=>{const be=new Map(pe);return be.set(t.id,{favoriteId:Y.id}),be}),A(`"${t.title}" added to favorites.`)}}catch(Y){f(((ne=(g=Y==null?void 0:Y.response)==null?void 0:g.data)==null?void 0:ne.msg)||Y.message||"Failed to update favorite."),R(pe=>{const be=new Map(pe);return u?be.set(t.id,{favoriteId:i==null?void 0:i.favoriteId}):be.set(t.id,{favoriteId:void 0}),be})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-start sm:items-center mb-6 flex-col sm:flex-row",children:[e.jsxs("div",{children:[" ",e.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Links"})," ",e.jsx("p",{className:"text-gray-600 mt-1 dark:text-gray-300",children:"Manage and browse useful links and resources."})," "]}),x&&(c==="admin"||c==="super_admin")&&!ie&&e.jsxs("button",{onClick:()=>{q?Xe():gt()},className:`mt-4 sm:mt-0 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white focus:outline-none focus:ring-2 focus:ring-offset-2
              ${q&&!ie?"bg-red-600 hover:bg-red-700 focus:ring-red-500":"bg-blue-600 hover:bg-blue-700 focus:ring-blue-500"}`,children:[q&&!ie?e.jsx(lt,{size:18,className:"mr-2"}):e.jsx(ms,{size:18,className:"mr-2"}),q&&!ie?"Cancel":"Add New Link"]})]}),q&&e.jsx("div",{className:"my-6 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg shadow",children:e.jsx(fs,{linkToEdit:ie,onLinkAdded:()=>Ke(),onLinkUpdated:()=>Ke(),onCancelEdit:Xe})}),o.size>0&&e.jsx("div",{className:"my-4 p-3 bg-gray-100 dark:bg-gray-700 rounded-md shadow-sm border border-gray-200 dark:border-gray-600",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-200",children:[o.size," item(s) selected"]}),(c==="admin"||c==="super_admin")&&e.jsxs("button",{onClick:kt,disabled:W,className:"px-3 py-1.5 text-xs font-medium rounded-md shadow-sm flex items-center focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-gray-800 text-white bg-red-600 hover:bg-red-700 dark:bg-red-700 dark:hover:bg-red-800 focus:ring-red-500 disabled:opacity-50",children:[e.jsx(st,{size:14,className:"mr-1.5"}),"Delete"]}),x&&e.jsxs("button",{onClick:wt,disabled:nt||Ye===0,className:"px-3 py-1.5 text-xs font-medium rounded-md shadow-sm flex items-center focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-gray-800 text-white bg-green-500 hover:bg-green-600 dark:bg-green-600 dark:hover:bg-green-700 focus:ring-green-500 disabled:opacity-50",children:[e.jsx(Ze,{size:14,className:"mr-1.5"}),"Download (",Ye,")"]}),(c==="admin"||c==="super_admin")&&e.jsxs("button",{onClick:St,disabled:he,className:"px-3 py-1.5 text-xs font-medium rounded-md shadow-sm flex items-center focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-gray-800 text-white bg-blue-500 hover:bg-blue-600 dark:bg-blue-600 dark:hover:bg-blue-700 focus:ring-blue-500 disabled:opacity-50",children:[e.jsx(es,{size:14,className:"mr-1.5"}),"Move"]})]})}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:gap-4 -mt-20",children:[G.length>0&&e.jsx("div",{className:"w-fit flex-shrink-0",children:e.jsx(ns,{software:G,selectedSoftwareId:k,onSelectFilter:ct})}),k&&e.jsx("div",{className:"flex items-center gap-2 min-w-[200px] mt-4 md:mt-0 flex-shrink-0",children:e.jsxs("select",{id:"versionFilterLinks",value:$||"",onChange:mt,className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-200",disabled:K.length===0,children:[e.jsx("option",{value:"",children:"Version"}),K.map(t=>e.jsx("option",{value:t.id,children:t.version_number},t.id))]})})]}),e.jsx("div",{className:"mb-4 mt-0",children:e.jsxs("button",{onClick:()=>Ve(t=>!t),className:"flex items-center px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-200 hover:bg-gray-300 dark:hover:bg-gray-600 rounded-md text-sm font-medium",children:[le?e.jsx(as,{size:18,className:"mr-1.5"}):e.jsx(ts,{size:18,className:"mr-1.5"})," Advanced Filters"]})}),le&&e.jsxs("div",{className:"my-4 p-4 border dark:border-gray-600 rounded-md bg-gray-50 dark:bg-gray-700 space-y-4 md:space-y-0 md:flex md:flex-wrap md:items-end md:gap-4",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"linkTypeFilterSelect",className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1",children:"Link Type"}),e.jsxs("select",{id:"linkTypeFilterSelect",value:_,onChange:t=>ke(t.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-200",children:[e.jsx("option",{value:"",children:"All"})," ",e.jsx("option",{value:"external",children:"External URL"})," ",e.jsx("option",{value:"uploaded",children:"Uploaded File"})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1",children:"Created Between"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"date",value:U,onChange:t=>Q(t.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-200"}),e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"to"}),e.jsx("input",{type:"date",value:D,onChange:t=>Z(t.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-200"})]})]}),e.jsx("div",{className:"flex items-end gap-2 pt-5",children:e.jsx("button",{onClick:Je,className:"text-sm px-4 py-2 bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600 text-white font-medium rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Clear"})})]}),ue?e.jsx("div",{className:"py-10",children:e.jsx(Et,{message:"Loading links..."})}):F&&p.length===0&&!ue?e.jsx(ds,{message:F,onRetry:Ge}):!ue&&!F&&p.length===0?e.jsxs("div",{className:"text-center py-10 bg-white dark:bg-gray-800 rounded-lg shadow-sm my-6",children:[e.jsx(it,{size:48,className:"mx-auto text-yellow-500 dark:text-yellow-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-gray-700 dark:text-gray-200 mb-3",children:Pe?"No Links Found Matching Criteria":"No Links Available"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 px-4",children:Pe?"Try adjusting or clearing your search/filter settings.":c==="admin"||c==="super_admin"?"Add new links to get started.":"Please check back later."}),Pe&&e.jsx("button",{onClick:Je,className:"mt-6 btn-primary text-sm",children:"Clear All Filters & Search"})]}):e.jsx(is,{columns:Nt,data:p,highlightedRowId:dt,rowClassName:"group",isLoading:ue||v,currentPage:T,totalPages:je,onPageChange:ut,itemsPerPage:ce,totalItems:se,sortColumn:P,sortOrder:I,onSort:ft,isSelectionEnabled:!0,selectedItemIds:o,onSelectItem:bt,onSelectAllItems:yt}),Ne&&d&&e.jsx(tt,{isOpen:Ne,title:"Delete Link",message:`Delete "${d.title}"?`,onConfirm:pt,onCancel:Ee,isConfirming:v,confirmButtonText:"Delete",confirmButtonVariant:"danger"}),qe&&e.jsx(tt,{isOpen:qe,title:`Delete ${o.size} Link(s)`,message:`Delete ${o.size} selected items?`,onConfirm:vt,onCancel:()=>Ue(!1),isConfirming:W,confirmButtonText:"Delete Selected",confirmButtonVariant:"danger"}),ze&&e.jsx(cs,{isOpen:ze,onClose:()=>_e(!1),title:`Move ${o.size} Link(s)`,children:e.jsxs("div",{className:"p-4",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-2",children:"Select target Software and optionally a Version:"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"modalSoftwareMoveLinks",className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1",children:"Target Software*"}),e.jsxs("select",{id:"modalSoftwareMoveLinks",value:H??"",onChange:t=>{Ae(t.target.value?parseInt(t.target.value):null),Fe(void 0)},className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white",disabled:he||G.length===0,children:[e.jsx("option",{value:"",children:"Select Software..."}),G.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]}),H&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"modalVersionMoveLinks",className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1",children:"Target Version (Optional)"}),e.jsxs("select",{id:"modalVersionMoveLinks",value:Le===null?"NULL_VERSION":Le??"",onChange:t=>Fe(t.target.value==="NULL_VERSION"?null:t.target.value?parseInt(t.target.value):void 0),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white",disabled:he||De,children:[e.jsx("option",{value:"",children:De?"Loading...":"Select Version (Optional)..."}),e.jsx("option",{value:"NULL_VERSION",children:"No Specific Version (Clear Association)"}),Be.map(t=>e.jsx("option",{value:t.id,children:t.version_number},t.id))]}),Be.length===0&&!De&&H&&e.jsx("p",{className:"text-xs text-yellow-600 mt-1",children:"No versions for selected software. You can still move to the software without a specific version."})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{type:"button",onClick:()=>_e(!1),className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 font-medium rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",disabled:he,children:"Cancel"}),e.jsx("button",{type:"button",onClick:jt,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600 text-white font-medium rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",disabled:he||!H,children:he?"Moving...":"Confirm Move"})]})]})}),x&&N&&e.jsxs("div",{ref:Ce,className:"mt-8 pt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-800 dark:text-white mb-4",children:["Comments for: ",e.jsx("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:N.title})]}),e.jsx(ss,{itemId:N.id,itemType:"link",onCommentAction:Ge})]}),!x&&N&&e.jsx("div",{ref:Ce,className:"mt-8 pt-6 border-t border-gray-200 dark:border-gray-700 text-center",children:e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Please log in to view and manage comments."})})]})};export{vs as default};
